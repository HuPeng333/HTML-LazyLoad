"use strict";class LazyLoad{constructor(LazyLoad){if(typeof LazyLoad.scrollElementSelector==='string'){const scrollElement=document.getElementById(LazyLoad.scrollElementSelector);if(!scrollElement){throw new Error('没有找到滚动容器选择器对应的元素');}this.scrollElement=scrollElement}else{this.scrollElement=document}const lazyLoadElements=[];LazyLoad.lazyLoadElementsSelector.forEach((value,index)=>{const nodeList=document.querySelectorAll(value);if(nodeList.length===0){console.warn('懒加载选择器中有无法找到的元素,索引: '+index)}else{nodeList.forEach(value1=>{lazyLoadElements.push(value1)})}});if(lazyLoadElements.length===0){throw new Error('没有找到可用的懒加载元素');}this.lazyLoadElements=lazyLoadElements;this.onenter=LazyLoad.onenter;this.onleave=LazyLoad.onleave}start(){console.log(this.scrollElement);this.scrollElement.addEventListener('scroll',()=>{this.lazyLoadElements.forEach(element=>{const elementOffsetTop=element.offsetTop;if(this.scrollElement===document){if(elementOffsetTop-this.scrollElement.documentElement.scrollTop-window.innerHeight<=0){this.onenter?this.onenter():''}}else{const scrollElementScrollTop=this.scrollElement.scrollTop;const scrollElementHeight=this.scrollElement.offsetHeight;console.log(elementOffsetTop,scrollElementScrollTop,scrollElementHeight);if(elementOffsetTop-scrollElementScrollTop-scrollElementHeight<=0){}}})})}stop(){}}
